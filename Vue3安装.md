### Vue3安装

1. 尽可能升级工具。

   - 如果使用了自定义的 webpack 设置：将 `vue-loader` 升级至 `^16.0.0`。
   - 如果使用了 `vue-cli`：通过 `vue upgrade` 升级到最新的 `@vue/cli-service`。
   - (替代方案) 迁移至 [Vite](https://cn.vitejs.dev/) + [vite-plugin-vue2](https://github.com/underfin/vite-plugin-vue2)。[[示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/565b948919eb58f22a32afca7e321b490cb3b074)]

2. 在 `package.json` 里，将 `vue` 更新到 3.1，安装相同版本的 `@vue/compat`。且如果存在 `vue-template-compiler` 的话，将其替换为 `@vue/compiler-sfc`。

   ```diff
   "dependencies": {
   -  "vue": "^2.6.12",
   +  "vue": "^3.1.0",
   +  "@vue/compat": "^3.1.0"
      ...
   },
   "devDependencies": {
   -  "vue-template-compiler": "^2.6.12"
   +  "@vue/compiler-sfc": "^3.1.0"
   }
   ```

3.

1. 在构建设置中，为 `vue` 设置别名 `@vue/compat`，且通过 Vue 编译器选项开启兼容模式。

   **示例配置**

   <details open=""><summary><b>vue-cli</b></summary><div class="language-js line-numbers-mode" style="position: relative; background-color: rgb(246, 246, 246); border-radius: 6px;"><pre class="language-js" style="line-height: 1.4; padding: 1.25rem 1.5rem 1.25rem 4.5rem; margin: 0.85rem 0px; background: transparent; border-radius: 6px; overflow: auto; position: relative; z-index: 1; vertical-align: middle;"><code style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: rgb(58, 56, 93); padding: 0px; margin: 0px; font-size: 0.85em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="padding: 0px; margin: 0px; color: rgb(132, 132, 134);">// vue.config.js</span>
   module<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span>exports <span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">=</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
     <span class="token function-variable function" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">chainWebpack</span><span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token parameter" style="padding: 0px; margin: 0px;">config</span> <span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">=&gt;</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
       config<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span>resolve<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span>alias<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span><span class="token function" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">set</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">(</span><span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'vue'</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">,</span> <span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'@vue/compat'</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">)</span>
   
       config<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span>module
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span><span class="token function" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">rule</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">(</span><span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'vue'</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">)</span>
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span><span class="token function" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">use</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">(</span><span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'vue-loader'</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">)</span>
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span><span class="token function" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">tap</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">(</span><span class="token parameter" style="padding: 0px; margin: 0px;">options</span> <span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">=&gt;</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
           <span class="token keyword" style="padding: 0px; margin: 0px; color: rgb(185, 45, 188);">return</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
             <span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">...</span>options<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">,</span>
             compilerOptions<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
               compatConfig<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
                 <span class="token constant" style="padding: 0px; margin: 0px; color: rgb(113, 124, 17);">MODE</span><span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token number" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">2</span>
               <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
             <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
           <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">)</span>
     <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
   <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
   </code></pre><div class="line-numbers-wrapper" style="position: absolute; top: 0px; width: 3.5rem; text-align: center; color: rgb(196, 196, 198); padding: 1.25rem 0px; line-height: 1.4; background-color: rgb(246, 246, 246); border-right: 1px solid rgb(231, 230, 230);"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">1</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">2</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">3</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">4</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">5</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">6</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">7</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">8</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">9</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">10</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">11</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">12</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">13</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">14</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">15</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">16</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">17</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">18</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">19</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">20</span><br style="user-select: none;"></div></div></details>

   <details open=""><summary><b>普通 webpack</b></summary><div class="language-js line-numbers-mode" style="position: relative; background-color: rgb(246, 246, 246); border-radius: 6px;"><pre class="language-js" style="line-height: 1.4; padding: 1.25rem 1.5rem 1.25rem 4.5rem; margin: 0.85rem 0px; background: transparent; border-radius: 6px; overflow: auto; position: relative; z-index: 1; vertical-align: middle;"><code style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: rgb(58, 56, 93); padding: 0px; margin: 0px; font-size: 0.85em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="padding: 0px; margin: 0px; color: rgb(132, 132, 134);">// webpack.config.js</span>
   module<span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">.</span>exports <span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">=</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
     resolve<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
       alias<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
         vue<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'@vue/compat'</span>
       <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
     <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">,</span>
     module<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
       rules<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">[</span>
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
           test<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token regex" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);"><span class="token regex-delimiter" style="padding: 0px; margin: 0px;">/</span><span class="token regex-source language-regex" style="padding: 0px; margin: 0px;">\.vue$</span><span class="token regex-delimiter" style="padding: 0px; margin: 0px;">/</span></span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">,</span>
           loader<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'vue-loader'</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">,</span>
           options<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
             compilerOptions<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
               compatConfig<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
                 <span class="token constant" style="padding: 0px; margin: 0px; color: rgb(113, 124, 17);">MODE</span><span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token number" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">2</span>
               <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
             <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
           <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
       <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">]</span>
     <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
   <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
   </code></pre><div class="line-numbers-wrapper" style="position: absolute; top: 0px; width: 3.5rem; text-align: center; color: rgb(196, 196, 198); padding: 1.25rem 0px; line-height: 1.4; background-color: rgb(246, 246, 246); border-right: 1px solid rgb(231, 230, 230);"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">1</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">2</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">3</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">4</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">5</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">6</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">7</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">8</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">9</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">10</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">11</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">12</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">13</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">14</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">15</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">16</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">17</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">18</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">19</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">20</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">21</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">22</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">23</span><br style="user-select: none;"></div></div></details>

   <details open=""><summary><b>Vite</b></summary><div class="language-js line-numbers-mode" style="position: relative; background-color: rgb(246, 246, 246); border-radius: 6px;"><pre class="language-js" style="line-height: 1.4; padding: 1.25rem 1.5rem 1.25rem 4.5rem; margin: 0.85rem 0px; background: transparent; border-radius: 6px; overflow: auto; position: relative; z-index: 1; vertical-align: middle;"><code style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: rgb(58, 56, 93); padding: 0px; margin: 0px; font-size: 0.85em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="padding: 0px; margin: 0px; color: rgb(132, 132, 134);">// vite.config.js</span>
   <span class="token keyword" style="padding: 0px; margin: 0px; color: rgb(185, 45, 188);">export</span> <span class="token keyword" style="padding: 0px; margin: 0px; color: rgb(185, 45, 188);">default</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
     resolve<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
       alias<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
         vue<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token string" style="padding: 0px; margin: 0px; color: rgb(10, 122, 52);">'@vue/compat'</span>
       <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
     <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">,</span>
     plugins<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">[</span>
       <span class="token function" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">vue</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">(</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
         template<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
           compilerOptions<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
             compatConfig<span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">{</span>
               <span class="token constant" style="padding: 0px; margin: 0px; color: rgb(113, 124, 17);">MODE</span><span class="token operator" style="padding: 0px; margin: 0px; color: rgb(11, 126, 125);">:</span> <span class="token number" style="padding: 0px; margin: 0px; color: rgb(194, 82, 5);">2</span>
             <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
           <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
         <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
       <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span><span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">)</span>
     <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">]</span>
   <span class="token punctuation" style="padding: 0px; margin: 0px; color: rgb(168, 169, 204);">}</span>
   </code></pre><div class="line-numbers-wrapper" style="position: absolute; top: 0px; width: 3.5rem; text-align: center; color: rgb(196, 196, 198); padding: 1.25rem 0px; line-height: 1.4; background-color: rgb(246, 246, 246); border-right: 1px solid rgb(231, 230, 230);"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">1</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">2</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">3</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">4</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">5</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">6</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">7</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">8</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">9</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">10</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">11</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">12</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">13</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">14</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">15</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">16</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">17</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">18</span><br style="user-select: none;"><span class="line-number" style="padding: 0px; margin: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; position: relative; z-index: 4; user-select: none; font-size: 0.85em;">19</span><br style="user-select: none;"></div></div></details>

1. 如果您使用的是 TypeScript，您还需要修改`vue`的类型以通过添加`*.d.ts`具有以下内容的文件来公开默认导出（在 Vue 3 中不再存在）：

   ```ts
   declare module 'vue' {
     import { CompatVue } from '@vue/runtime-dom'
     const Vue: CompatVue
     export default Vue
     export * from '@vue/runtime-dom'
   }
   ```

   

2. 此时，您的应用程序可能会遇到一些编译时错误/警告（例如使用过滤器）。先修好它们。如果所有编译器警告都消失了，您还可以将编译器设置为 Vue 3 模式。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/b05d9555f6e115dea7016d7e5a1a80e8f825be52)

3. 在修复了这些错误之后，如果没有受制于上述的[限制](https://v3.cn.vuejs.org/guide/migration/migration-build.html#已知的限制)，那么应用就应该可以运行了。

   你可能会同时从命令行和浏览器控制台看到很多警告。这里提供一些一般化的小建议：

   - 你可以在浏览器控制台里过滤特定的警告。建议通过使用过滤器，使自己每次专注修复同一种问题。你也可以使用类似 `-GLOBAL_MOUNT` 的否定式过滤器。
   - 你可以通过[兼容性配置](https://v3.cn.vuejs.org/guide/migration/migration-build.html#兼容性配置)关闭对特定的废弃内容的处理。
   - 有些警告可能来自你使用的依赖 (如 `vue-router`)。你可以通过警告的组件嵌套或调用栈的追踪信息 (可以点击展开) 来进行检查。可以优先专注于修复源自你自己代码的警告。
   - 如果你使用了 `vue-router`，请注意在升级至 `vue-router` v4 之前，`<transition>` 和 `<keep-alive>` 无法和 `<router-view>` 一起工作。

4. 升级 [`` 类名](https://v3.cn.vuejs.org/guide/migration/transition.html)。这是唯一没有运行时警告的特性。你可以在整个项目范围内做一次 `.*-enter` 和 `.*-leave` CSS 类名的搜索。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/d300103ba622ae26ac26a82cd688e0f70b6c1d8f)

5. 更新应用的入口以使用[新的全局挂载 API](https://v3.cn.vuejs.org/guide/migration/global-api.html#一个新的全局-api-createapp)。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/a6e0c9ac7b1f4131908a4b1e43641f608593f714)

6. [将 `vuex` 升级至 v4](https://next.vuex.vuejs.org/zh/guide/migrating-to-4-0-from-3-x.html)。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/5bfd4c61ee50f358cd5daebaa584f2c3f91e0205)

7. [将 `vue-router` 升级至 v4](https://next.router.vuejs.org/zh/guide/migration/index.html)。如果你还使用了 `vuex-router-sync`，可以同时将其替换为一个 store getter。

   升级过后，同 `<router-view>` 一起使用 `<transition>` 和 `<keep-alive>` 就要求使用新的[基于作用域插槽的语法](https://next.router.vuejs.org/zh/guide/migration/index.html#router-view-、-keep-alive-和-transition)。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/758961e73ac4089890079d4ce14996741cf9344b)

8. 逐个修复警告。注意有些特性在 Vue 2 和 Vue 3 之间存在行为冲突——例如渲染函数 API，或函数式组件 vs. 异步组件的改变。为了迁移到 Vue 3 API 而不影响到应用的其它部分，你可以通过 [`compatConfig` 选项](https://v3.cn.vuejs.org/guide/migration/migration-build.html#基于单个组件的配置)对单个组件选择性启用 Vue 3 的行为。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/d0c7d3ae789be71b8fd56ce79cb4cb1f921f893b)

9. 当修复了所有警告以后，你就可以移除迁移构建版本并切换为 Vue 3。注意如果存在基于 Vue 2 行为的依赖，你可能无法做到这一点。

   [示例提交](https://github.com/vuejs/vue-hackernews-2.0/commit/9beb45490bc5f938c9e87b4ac1357cfb799565bd)

